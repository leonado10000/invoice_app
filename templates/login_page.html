{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login | InvoiceOS</title>

  <!-- Professional font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <!-- GSAP for smooth, elegant motion -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" integrity="sha512-tQe7TnWkzH7qFZKXaVGk5f0rXyC3JkOexxw9gC7kQb1rI7b5Y9w8oVmR3mW3bq1qv8lV2yTkvYqvQm8p2W0YzQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <style>
    :root{
      --bg-1:#0b1020;      /* deep navy */
      --bg-2:#0e162e;      /* slate navy */
      --card:#0f1a33cc;    /* translucent card */
      --stroke:#21345b;    /* soft outline */
      --accent:#36d6c4;    /* refined teal */
      --accent-2:#6aa9ff;  /* soft blue */
      --text:#e6eefc;
      --muted:#95a3c0;
      --chip:#162546cc;
      --chip-stroke:#2a3f6e;
      --success:#55e6a5;
    }

    *{box-sizing:border-box}
    html, body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 85% 15%, #17254a55, transparent),
        radial-gradient(900px 600px at 10% 90%, #11224a66, transparent),
        linear-gradient(180deg, var(--bg-1), var(--bg-2));
      overflow:hidden;
    }

    .stage{
      position:relative;
      height:100%;
      width:100%;
      display:grid;
      grid-template-columns: 1fr minmax(320px, 420px);
      gap: clamp(24px, 6vw, 56px);
      align-items:center;
      padding: clamp(20px, 5vw, 60px);
    }
    @media (max-width: 980px){
      .stage{grid-template-columns: 1fr; padding-top:48px; padding-bottom:48px;}
      .illustration{display:none;}
    }

    /* Soft noise */
    .grain{
      pointer-events:none;
      position:fixed; inset:0;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.95' numOctaves='2' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='table' tableValues='0 0 0 0 .05 .09 .12 .17 .2 .23 .27 .3 .34 .38 .42 .5 .55 .62 .68 .75 .82 .88 .92 1'/></feComponentTransfer></filter><rect width='100%' height='100%' filter='url(%23n)'/></svg>");
      opacity:.25; mix-blend-mode:soft-light;
    }

    /* Portal halo behind the card */
    .portal{
      position:absolute; right:min(6vw,60px); z-index:0;
      width: 520px; height: 520px; border-radius: 50%;
      background:
        radial-gradient(closest-side, #1a2b53 0%, #0f1a33 55%, transparent 60%),
        conic-gradient(from 180deg at 50% 50%, #1a89ff22, #36d6c433, #1a89ff22);
      filter: blur(28px) saturate(1.2);
      opacity:.9;
      animation: portal-spin 22s linear infinite;
    }
    @keyframes portal-spin { to { transform: rotate(360deg); } }

    /* Illustration (invoice machine / console) */
    .illustration{
      position:relative;
      z-index:1;
      height: min(70vh, 640px);
      display:flex; align-items:center; justify-content:center;
    }
    .illustration svg{ height:100%; width:auto; filter: drop-shadow(0 6px 24px rgba(0,0,0,.35)); }

    /* Login card */
    .card{
      position:relative;
      z-index:2;
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: 18px;
      backdrop-filter: blur(10px);
      box-shadow: 0 12px 40px rgba(0,0,0,.35);
      padding: 28px;
    }
    .brand{
      display:flex; align-items:center; gap:10px; margin-bottom:18px;
    }
    .logo-dot{width:12px;height:12px;border-radius:50%;background:var(--accent);
      box-shadow:0 0 16px var(--accent);}
    .brand h1{font-size:18px; font-weight:600; letter-spacing:.3px; margin:0;}
    .brand small{color:var(--muted)}

    .form{
      display:grid; gap:16px; margin-top:8px;
    }
    .slot{
      display:grid; gap:8px;
    }
    .slot label{
      font-size:12px; color:var(--muted); letter-spacing:.4px;
    }
    .slot input{
      width:100%;
      padding: 14px 14px 14px 42px;
      border-radius: 12px;
      border:1px solid var(--stroke);
      background: #0e1833;
      color:var(--text);
      outline:none;
      transition: border-color .2s, box-shadow .2s, transform .06s ease;
      box-shadow: inset 0 0 0 1px #0c1530, 0 1px 0 rgba(255,255,255,.02);
    }
    .slot input:focus{
      border-color: var(--accent);
      box-shadow: 0 0 0 3px #36d6c41f;
      transform: translateY(-1px);
    }
    .slot .icon{
      position:absolute; margin: 14px; width:16px; height:16px; opacity:.75;
    }

    .submit{
      margin-top:6px;
      display:flex; gap:12px; align-items:center;
    }
    button.primary{
      flex:1; display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding: 12px 14px;
      border-radius: 12px; border:0; cursor:pointer;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color:#061021; font-weight:600; letter-spacing:.2px;
      box-shadow: 0 6px 20px rgba(52,206,189,.35);
      transition: transform .06s ease, box-shadow .2s ease, filter .2s ease;
    }
    button.primary:hover{ filter:saturate(1.1); box-shadow:0 8px 26px rgba(52,206,189,.45); }
    button.primary:active{ transform: translateY(1px); }

    .meta{ font-size:12px; color:var(--muted); margin-top:12px; }

    /* Feelings / outcomes chips */
    .chips{
      pointer-events:none;
      position:fixed; inset:0; z-index:3;
    }
    .chip{
      position:absolute;
      padding:8px 12px;
      font-size:12px; font-weight:500; letter-spacing:.2px;
      color:#dfe9ff;
      background: linear-gradient(180deg, var(--chip), #0e1c38e6);
      border: 1px solid var(--chip-stroke);
      border-radius: 999px;
      box-shadow: 0 6px 20px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.03);
      backdrop-filter: blur(6px);
      opacity:0;
      will-change: transform, opacity;
    }

    /* helper */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>

<body>
  <div class="grain"></div>
  <div class="stage" id="stage">
    <!-- Illustration: "Invoice Machine" / Console with animated receipt -->
    <div class="illustration" aria-hidden="true">
      <svg viewBox="0 0 780 540" role="img">
        <title>Invoice Console Illustration</title>
        <!-- base -->
        <defs>
          <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#162a55"/>
            <stop offset="1" stop-color="#0a1430"/>
          </linearGradient>
          <linearGradient id="screen" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#10264d"/>
            <stop offset="1" stop-color="#0e3a7a"/>
          </linearGradient>
          <linearGradient id="accent" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0" stop-color="#36d6c4"/>
            <stop offset="1" stop-color="#6aa9ff"/>
          </linearGradient>
          <clipPath id="paper-clip">
            <rect x="410" y="82" width="160" height="110" rx="8" ry="8"/>
          </clipPath>
        </defs>

        <!-- device body -->
        <rect x="60" y="60" width="520" height="360" rx="28" fill="url(#g1)" stroke="#2a3f6e" stroke-width="2"/>
        <!-- screen -->
        <rect x="100" y="95" width="300" height="120" rx="14" fill="url(#screen)" stroke="#2a3f6e"/>
        <rect x="112" y="110" width="276" height="18" rx="9" fill="#0f1f40"/>
        <rect x="112" y="136" width="210" height="12" rx="6" fill="#143060"/>
        <rect x="112" y="156" width="180" height="12" rx="6" fill="#143060"/>
        <circle cx="392" cy="110" r="6" fill="url(#accent)">
          <animate attributeName="opacity" values="1;0.4;1" dur="2s" repeatCount="indefinite"/>
        </circle>

        <!-- keypad -->
        <g transform="translate(100 240)">
          <rect x="0" y="0" width="300" height="160" rx="16" fill="#0d1a38" stroke="#2a3f6e"/>
          <!-- keys -->
          <g fill="#101f40" stroke="#2a3f6e">
            <rect x="18" y="16" width="60" height="34" rx="8"/>
            <rect x="96" y="16" width="60" height="34" rx="8"/>
            <rect x="174" y="16" width="60" height="34" rx="8"/>
            <rect x="18" y="60" width="60" height="34" rx="8"/>
            <rect x="96" y="60" width="60" height="34" rx="8"/>
            <rect x="174" y="60" width="60" height="34" rx="8"/>
            <rect x="18" y="104" width="60" height="34" rx="8"/>
            <rect x="96" y="104" width="60" height="34" rx="8"/>
            <rect x="174" y="104" width="60" height="34" rx="8"/>
          </g>
          <rect x="246" y="16" width="36" height="122" rx="10" fill="url(#accent)"/>
        </g>

        <!-- printer module -->
        <g transform="translate(400 70)">
          <rect x="0" y="0" width="190" height="160" rx="18" fill="#0d1a38" stroke="#2a3f6e"/>
          <rect x="8" y="8" width="174" height="36" rx="10" fill="#0b1733" stroke="#2a3f6e"/>
          <rect x="12" y="50" width="166" height="96" rx="10" fill="#0b1733" stroke="#2a3f6e"/>
          <!-- paper -->
          <g clip-path="url(#paper-clip)">
            <g class="paper" transform="translate(0,0)">
              <rect x="410" y="70" width="160" height="180" fill="#f7fbff"/>
              <!-- printed lines -->
              <g stroke="#b6c6e6" stroke-width="2">
                <line x1="420" y1="92" x2="560" y2="92"/>
                <line x1="420" y1="112" x2="548" y2="112"/>
                <line x1="420" y1="132" x2="544" y2="132"/>
                <line x1="420" y1="152" x2="556" y2="152"/>
                <line x1="420" y1="172" x2="540" y2="172"/>
                <line x1="420" y1="192" x2="560" y2="192"/>
              </g>
            </g>
          </g>
          <!-- rollers -->
          <rect x="60" y="150" width="70" height="8" rx="4" fill="#1f2e55"/>
        </g>

        <!-- shadow base -->
        <ellipse cx="320" cy="438" rx="260" ry="34" fill="#00081455"/>
      </svg>
    </div>

    <!-- Portal glow -->
    <div class="portal"></div>

    <!-- Login card -->
    <section class="card" aria-labelledby="title">
      <div class="brand">
        <span class="logo-dot"></span>
        <h1 id="title">InvoiceOS</h1>
        <small>Secure Sign-in</small>
      </div>

      <form method="POST" class="form" autocomplete="on" novalidate>
        {% csrf_token %}

        <div class="slot">
          <label for="username">Operator ID</label>
          <div style="position:relative">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm0 2c-3.866 0-7 2.582-7 5.769C5 22.46 6.791 24 9 24h6c2.209 0 4-1.54 4-4.231C19 16.582 15.866 14 12 14z"/></svg>
            <input id="username" name="username" type="text" required placeholder="jane@acme.co" inputmode="email" />
          </div>
        </div>

        <div class="slot">
          <label for="password">Access Key</label>
          <div style="position:relative">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 17a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6-7h-1V7a5 5 0 0 0-10 0v3H6a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2zm-9-3a3 3 0 0 1 6 0v3H9V7z"/></svg>
            <input id="password" name="password" type="password" required placeholder="••••••••" />
          </div>
        </div>

        <div class="submit">
          <button type="submit" class="primary">
            Enter System
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M12 4l1.41 1.41L9.83 9H20v2H9.83l3.58 3.59L12 16l-6-6 6-6z"/>
            </svg>
          </button>
        </div>

        <p class="meta">© {{ now|date:"Y" }} InvoiceOS — encrypted & audit-ready</p>
      </form>
    </section>
  </div>

  <!-- Random “feelings/outcomes” chips -->
  <div class="chips" id="chips" aria-hidden="true"></div>

  <script>
    /* animated receipt feed */
    (function(){
      const paper = document.querySelector('.paper');
      if(paper){
        // simple looped translate to simulate paper feeding
        const loop = () => {
          paper.style.transform = 'translateY(-120px)';
          paper.style.transition = 'transform 4s linear';
          setTimeout(() => {
            paper.style.transition = 'none';
            paper.style.transform = 'translateY(0)';
            requestAnimationFrame(loop);
          }, 4000);
        };
        requestAnimationFrame(loop);
      }
    })();

    /* feelings/outcomes chips, elegant random drift using GSAP */
    (function(){
      const CHIPS_MAX = 5;                 // at most visible simultaneously
      const SPAWN_EVERY = 1200;            // ms
      const LIFE = {min: 3200, max: 5200}; // ms
      const PADDING = 24;
      const words = [
        "peace of mind",
        "audit-ready",
        "on-time payments",
        "client trust",
        "zero guesswork",
        "cash-flow clarity",
        "time back",
        "less chasing",
        "instant insights",
        "team alignment",
        "clean history",
        "predictable revenue"
      ];
      const chipsRoot = document.getElementById('chips');
      const stage = document.getElementById('stage');

      function random(min, max){ return Math.random() * (max - min) + min; }

      function spawn(){
        if(document.querySelectorAll('.chip').length >= CHIPS_MAX) return;

        // Choose unique-ish word per spawn
        const word = words[Math.floor(Math.random()*words.length)];

        const chip = document.createElement('div');
        chip.className = 'chip';
        chip.textContent = word;

        // Position randomly, biasing around the form/portal area, but anywhere on stage
        const rect = stage.getBoundingClientRect();
        const x = random(rect.left + PADDING, rect.right - PADDING);
        const y = random(rect.top + PADDING, rect.bottom - PADDING);

        chip.style.left = x + 'px';
        chip.style.top  = y + 'px';

        chipsRoot.appendChild(chip);

        const life = random(LIFE.min, LIFE.max);

        // Fade/float in, drift, then fade out and remove
        gsap.fromTo(chip,
          {opacity:0, y:6, scale:0.98, rotate: random(-4,4)},
          {opacity:1, y:-6, scale:1, duration: .6, ease: "power2.out"}
        );
        gsap.to(chip, {
          x: "+=" + random(-30, 30),
          y: "-=" + random(20, 40),
          opacity: 0,
          duration: life/1000,
          ease: "sine.inOut",
          onComplete: () => chip.remove()
        });
      }

      // gentle ambient start-up chips
      for(let i=0;i<3;i++) setTimeout(spawn, i*400);

      setInterval(spawn, SPAWN_EVERY);
    })();
  </script>
</body>
</html>
